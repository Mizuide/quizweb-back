(this.webpackJsonpquizgame=this.webpackJsonpquizgame||[]).push([[0],{40:function(e,t,n){},41:function(e,t,n){},69:function(e,t,n){"use strict";n.r(t);var c=n(1),i=n.n(c),r=n(33),s=n.n(r),a=(n(40),n(41),n(2)),u=n(4),o=n(10),j=n.n(o);var d=function(){var e=Object(c.useState)(),t=Object(a.a)(e,2),n=t[0],i=t[1];return[n,function(e){(function(e){return j.a.get("/quizWeb/quizDetail",{params:e})})(e).then((function(e){return i(e.data)}))}]},b=n(0),l=function(e){return Object(c.useEffect)((function(){j.a.post("/quizWeb/avarage",{correct:e.numOfCorrect,quizId:e.quiz.id})}),[]),Object(b.jsxs)("div",{className:"finalResult",children:["\u3042\u306a\u305f\u306e\u6b63\u89e3\u6570\u306f\u30fb\u30fb\u30fb","".concat(e.quiz.questions.length,"\u554f\u4e2d").concat(e.numOfCorrect,"\u554f\u6b63\u89e3\u3067\u3057\u305f\uff01")]})},O="none",f="waiting",x="correct",h="incorrect",m=function(e){var t=[];return void 0===e.correctAnswer||void 0===e.answer?e.choices.forEach((function(n,i){t.push(function(e){var t=Object(c.useContext)(y),n=Object(a.a)(t,2),i=(n[0],n[1]);return Object(b.jsx)("div",{className:"choice",onClick:function(){i(f),void 0===e.answer&&e.setAnswer(e.choice.selectionNo)},children:e.choice.content},e.key)}({key:i,choice:n,answer:e.answer,setAnswer:e.setAnswer}))})):e.choices.forEach((function(n,c){t.push(function(e){var t="none";return e.answer&&e.correct?t="success":e.answer&&!e.correct?t="faile":!e.answer&&e.correct&&(t="correctAnswer"),Object(b.jsx)("div",{className:"choice ".concat(t),children:e.choice.content},e.key)}({key:c,choice:n,answer:n.selectionNo===e.answer,correct:n.selectionNo===e.correctAnswer}))})),Object(b.jsx)("div",{className:"choices",children:t})},v=n(3),g=function(){var e=Object(c.useState)(),t=Object(a.a)(e,2),n=t[0],i=t[1];return[n,function(e){j.a.post("/quizWeb/answer",Object(v.a)({},e)).then((function(e){return i(e.data)}))}]},p=n.p+"static/media/correct.7fe1bc84.png",q=n.p+"static/media/incorrect.e1cc9809.png",C=n.p+"static/media/waiting.3d89aabb.gif",w=function(e){var t,n="inline";switch(e.answerStatus){case O:n="none";break;case f:t=Object(b.jsx)("img",{alt:"\u8aad\u307f\u8fbc\u307f\u4e2d",src:C}),n="none";break;case x:t=Object(b.jsx)("img",{alt:"\u6b63\u89e3",src:p});break;case h:t=Object(b.jsx)("img",{alt:"\u4e0d\u6b63\u89e3",src:q})}var c={display:n};return Object(b.jsxs)("div",{className:"Result",children:[t,Object(b.jsx)("div",{className:"comment",style:c,children:e.comment})]})},N=function(e){var t=Object(c.useContext)(y),n=Object(a.a)(t,2),i=n[0],r=n[1],s=Object(c.useState)(),u=Object(a.a)(s,2),o=u[0],j=u[1],d=g(),l=Object(a.a)(d,2),O=l[0],f=l[1];return Object(c.useEffect)((function(){if(void 0!==o){var t={questionId:e.question.id,selectiionNo:o};f(t)}}),[o]),Object(c.useEffect)((function(){void 0!==O&&r(O===o?x:h)}),[O]),Object(b.jsxs)("div",{children:[Object(b.jsxs)("div",{className:"content",children:[e.question.content," "]}),Object(b.jsx)(m,{choices:e.question.choices,answer:o,setAnswer:j,correctAnswer:O}),Object(b.jsx)(w,{comment:e.question.comment,answerStatus:i})]})},y=i.a.createContext([O,function(e){return console.log("notDefined")}]),I=function(e){var t=e.questions.length,n=Object(c.useState)(O),i=Object(a.a)(n,2),r=i[0],s=i[1],u=Object(c.useState)(0),o=Object(a.a)(u,2),j=o[0],d=o[1];Object(c.useEffect)((function(){r===x&&e.countupNumOfCorrect()}),[r]);var l=[];return e.questions.forEach((function(e,t){return l.push(Object(b.jsx)(N,{question:e},t))})),Object(b.jsxs)("div",{className:"questions",onClick:function(){if(r===O||r===f)return!1;j+1<t?(d(j+1),s(O)):j+1===t&&e.setComplete()},children:[Object(b.jsx)("div",{className:"header",children:"\u7b2c".concat(j+1,"\u554f")}),Object(b.jsx)(y.Provider,{value:[r,s],children:l[j]})]})},S=function(e){return Object(b.jsxs)("div",{className:"quizDescription",children:[Object(b.jsx)("div",{className:"desCription",children:e.quizDetail.description}),Object(b.jsx)("img",{src:e.quizDetail.thumbnail}),Object(b.jsx)("div",{className:"startButton",onClick:e.onClickStart,children:"\u30b9\u30bf\u30fc\u30c8\uff01"})]})},z=function(){var e={quizId:Object(u.f)().id},t=d(),n=Object(a.a)(t,2),i=n[0],r=n[1],s=Object(c.useState)(),o=Object(a.a)(s,2),j=o[0],O=o[1],f=Object(c.useState)(0),x=Object(a.a)(f,2),h=x[0],m=x[1],v=Object(c.useRef)();v.current=h;var g=Object(c.useState)(!1),p=Object(a.a)(g,2),q=p[0],C=p[1];return Object(c.useEffect)((function(){r(e)}),[]),Object(c.useEffect)((function(){void 0!==i&&O(Object(b.jsx)(S,{quizDetail:i,onClickStart:function(){return O(Object(b.jsx)(I,{questions:i.questions,countupNumOfCorrect:function(){void 0!==v.current&&m(v.current+1)},setComplete:function(){return C(!0)}}))}}))}),[i]),Object(c.useEffect)((function(){q&&void 0!==i&&O(Object(b.jsx)(l,{numOfCorrect:h,quiz:i}))}),[q]),Object(b.jsx)("div",{className:"quizScreen",children:j})},k=n(13),E=function(e){return Object(b.jsx)(k.b,{to:"/game/"+e.quiz.id,children:Object(b.jsxs)("div",{children:[Object(b.jsx)("div",{className:"title",children:e.quiz.title}),Object(b.jsx)("div",{className:"description",children:e.quiz.description}),Object(b.jsx)("div",{className:"thumbnail",children:Object(b.jsx)("img",{src:e.quiz.thumbnail})})]})},e.quiz.id)},F=function(e){var t=Object(c.useState)(null),n=Object(a.a)(t,2),i=n[0],r=n[1];return[i,function(t,n){var c=t.map((function(e){return E({quiz:e})})).slice((n-1)*e,n*e);r(c.filter((function(e){return null!==e})))}]};var R=function(){var e=Object(c.useState)([]),t=Object(a.a)(e,2),n=t[0],i=t[1];return[n,function(e){var t;(t=e,j.a.post("/quizWeb/quiz/get",Object(v.a)({},t))).then((function(t){return null===e.lastQuiz?t.data:n.concat(t.data)})).then((function(e){return i(e)}))}]},A=function(e){return Object(b.jsx)("div",{className:"panel disable ".concat(e.disable),onClick:e.disable?function(){return!1}:e.onClick,children:e.display})},P=function(e){return Object(b.jsxs)("div",{className:"pager",children:[Object(b.jsx)(A,{display:"next",onClick:function(){return e.setPage(e.page+1)},disable:e.maxFlg}),Object(b.jsx)("div",{className:"current_page",children:e.page}),Object(b.jsx)(A,{display:"prev",onClick:function(){return e.setPage(e.page-1)},disable:e.page<=1})]})},Q=function(e){return null===e.display||0===e.display.length?Object(b.jsx)("nav",{className:"index",children:Object(b.jsx)("img",{alt:"\u8aad\u307f\u8fbc\u307f\u4e2d",src:C})}):Object(b.jsx)("nav",{className:"index",children:e.display})},W="all",D=[{id:"all",name:"\u5168\u3066",img:""},{id:"anime",name:"\u30a2\u30cb\u30e1\u30fb\u6f2b\u753b",img:""},{id:"movie",name:"\u5c0f\u8aac\u30fb\u6620\u753b",img:""},{id:"music",name:"\u97f3\u697d",img:""},{id:"tarent",name:"\u82b8\u80fd\u30fb\u82b8\u80fd\u4eba",img:""},{id:"trivia",name:"\u77e5\u8b58\u30fb\u96d1\u5b66",img:""},{id:"study",name:"\u5b66\u7fd2",img:""},{id:"other",name:"\u305d\u306e\u4ed6",img:""}],T="newOrder",B=[{id:"newOrder",name:"\u65b0\u7740\u9806"},{id:"oldOrder",name:"\u53e4\u3044\u9806"},{id:"viewOrder",name:"\u95b2\u89a7\u6570\u9806"}],L=n(17),J=function(e){return Object(b.jsxs)("div",{className:"category",onClick:function(){e.setCategory(e.category.id)},children:[Object(b.jsx)("div",{className:"name",children:e.category.name}),Object(b.jsx)("div",{className:"img",children:Object(b.jsx)("img",{src:e.category.img})})]},e.key)},M=function(e){var t,n=[],c=0,i=Object(L.a)(D);try{for(i.s();!(t=i.n()).done;){var r=t.value,s=J({key:c,category:r,setCategory:e.setCategory});null!==s&&n.push(s),c++}}catch(a){i.e(a)}finally{i.f()}return Object(b.jsx)("div",{className:"categories",children:n})},_=function(e){var t,n=function(e){return Object(b.jsx)("div",{className:"order",onClick:function(){return e.setOrder(e.order.id)},children:e.order.name},e.key)},c=[],i=0,r=Object(L.a)(B);try{for(r.s();!(t=r.n()).done;){var s=n({order:t.value,setOrder:e.setOrder,key:i});null!==s&&c.push(s),i++}}catch(a){r.e(a)}finally{r.f()}return Object(b.jsx)("div",{className:"orderList",children:c})},G=function(e){return Object(b.jsx)("div",{className:"whereTitle",children:Object(b.jsx)("input",{type:"search",className:"input",onChange:function(t){return e.setWhereTitle(t.target.value)}})})},H=function(e){var t=Object(c.useState)(W),n=Object(a.a)(t,2),i=n[0],r=n[1],s=Object(c.useState)(T),u=Object(a.a)(s,2),o=u[0],j=u[1],d=Object(c.useState)(""),l=Object(a.a)(d,2),O=l[0],f=l[1];return Object(b.jsxs)("div",{className:"SearchConditions",children:[Object(b.jsx)(M,{setCategory:r}),Object(b.jsx)(_,{setOrder:j}),Object(b.jsx)(G,{setWhereTitle:f}),Object(b.jsx)("button",{onClick:function(){return e.setConditions(Object(v.a)(Object(v.a)({},e.conditions),{},{category:i,order:o,title:O}))},children:"\u7d5e\u308a\u8fbc\u307f"})]})},K=function(){var e=R(),t=Object(a.a)(e,2),n=t[0],i=t[1],r=Object(c.useState)(1),s=Object(a.a)(r,2),u=s[0],o=s[1],j=F(10),d=Object(a.a)(j,2),l=d[0],O=d[1],f={category:W,title:"",order:T},x=Object(c.useState)(f),h=Object(a.a)(x,2),m=h[0],g=h[1],p={lastQuiz:null,searchConditions:m},q=Object(c.useState)(p),C=Object(a.a)(q,2),w=C[0];C[1];return Object(c.useEffect)((function(){return O(n,u)}),[n]),Object(c.useEffect)((function(){return i(Object(v.a)(Object(v.a)({},w),{},{searchConditions:m,lastQuiz:null}))}),[m]),Object(c.useEffect)((function(){O(n,u),0!==n.length&&n.length-10*u<=10&&i(Object(v.a)(Object(v.a)({},w),{},{lastQuiz:n[n.length-1]}))}),[u]),Object(b.jsxs)("div",{children:[Object(b.jsx)(H,{conditions:m,setConditions:g}),Object(b.jsx)(Q,{display:l}),Object(b.jsx)(P,{page:u,setPage:o,maxFlg:n.length<10*u})]})},U=n(18),V=function(e){var t=Object(c.useState)(""),n=Object(a.a)(t,2),i=n[0],r=n[1],s=function(e){var t=Object(c.useContext)(te),n=Object(a.a)(t,2),i=n[0],r=n[1],s=Object(c.useRef)([]);s.current=i.questions;var u=s.current.find((function(t){return t.indexId===e}));if(void 0===u)throw new Error("this question is not exists:index"+e);return function(t,n){if(void 0===u.choices.find((function(e){return e.indexId===n})))throw new Error("this argument index is not exists:index"+n);r(Object(v.a)(Object(v.a)({},i),{},{questions:s.current.map((function(c){return c.indexId===e?Object(v.a)(Object(v.a)({},u),{},{choices:u.choices.map((function(e){return e.indexId===n?Object(v.a)(Object(v.a)({},e),{},{content:t}):e}))}):c}))}))}}(e.questionIndex);return Object(c.useEffect)((function(){s(i,e.choiceIndex)}),[i]),Object(b.jsx)("div",{className:"createChoiceField",children:Object(b.jsx)("input",{type:"text",placeholder:"\u9078\u629e\u80a2\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044",onChange:function(e){return r(e.target.value)}})})},X=function(e){var t=Object(c.useState)(2),n=Object(a.a)(t,2),i=n[0],r=n[1],s=Object(c.useState)([]),u=Object(a.a)(s,2),o=u[0],j=u[1],d=function(e){var t=Object(c.useContext)(te),n=Object(a.a)(t,2),i=n[0],r=n[1],s=Object(c.useRef)([]);s.current=i.questions;var u=s.current.find((function(t){return t.indexId===e}));if(void 0===u)throw new Error("this question is not exists:index"+e);return function(t){var n=u.choices;n=n.map((function(e){return e.indexId===t?Object(v.a)(Object(v.a)({},e),{},{correctFlg:!0}):e.indexId!==t&&!0===e.correctFlg?Object(v.a)(Object(v.a)({},e),{},{correctFlg:!1}):e})),r(Object(v.a)(Object(v.a)({},i),{},{questions:s.current.map((function(t){return t.indexId===e?Object(v.a)(Object(v.a)({},u),{},{choices:n}):t}))}))}}(e.quesitonIndex),l=function(e){var t=Object(c.useContext)(te),n=Object(a.a)(t,2),i=n[0],r=n[1],s=Object(c.useRef)([]);s.current=i.questions;var u=s.current.find((function(t){return t.indexId===e}));if(void 0===u)throw new Error("this question is not exists:index"+e);return function(t){if(void 0!==u.choices.find((function(e){return e.indexId==t.indexId})))throw new Error("this choice is already exists:index"+t.indexId);u.choices.push(t),r(Object(v.a)(Object(v.a)({},i),{},{questions:s.current.map((function(t){return t.indexId===e?u:t}))}))}}(e.quesitonIndex),O=function(e){var t=Object(c.useContext)(te),n=Object(a.a)(t,2),i=n[0],r=n[1],s=Object(c.useRef)([]);s.current=i.questions;var u=s.current.find((function(t){return t.indexId===e}));if(void 0===u)throw new Error("this question is not exists:index"+e);return function(t){if(void 0===u.choices.find((function(e){return e.indexId===t})))throw new Error("this argument index is not exists:index"+t);r(Object(v.a)(Object(v.a)({},i),{},{questions:s.current.map((function(n){return n.indexId===e?Object(v.a)(Object(v.a)({},u),{},{choices:u.choices.filter((function(e){return e.indexId!==t}))}):n}))}))}}(e.quesitonIndex),f=Object(c.useRef)([]);f.current=o,Object(c.useEffect)((function(){x(0),x(1)}),[]);var x=function(t){l({indexId:t,content:"",correctFlg:!1});f.current.push(Object(b.jsxs)("div",{children:[Object(b.jsx)(V,{questionIndex:e.quesitonIndex,choiceIndex:t}),Object(b.jsx)("input",{id:"".concat(t),value:t,name:"correctCheck",onChange:function(e){return function(e){if(d(t),document.querySelectorAll(".correct").forEach((function(e){return e.className=""})),null===e.target.parentElement)throw new Error("choice zone is invalid,it need parent element");e.target.parentElement.className="correct"}(e)},type:"radio"}),Object(b.jsx)("div",{className:"delete",onClick:function(){return e=t,j(f.current.filter((function(t){return t.key!=e}))),void O(e);var e},children:"\u3053\u306e\u9078\u629e\u80a2\u3092\u524a\u9664"})]},t)),j(Object(U.a)(f.current))};return Object(b.jsxs)("div",{className:"createChoiceForm",children:[o,Object(b.jsx)("div",{onClick:function(){x(i),r(i+1)},children:"\u9078\u629e\u80a2\u3092\u8ffd\u52a0"})]})},Y=function(e){var t=Object(c.useState)(""),n=Object(a.a)(t,2),i=n[0],r=n[1],s=Object(c.useState)(""),u=Object(a.a)(s,2),o=u[0],j=u[1],d=function(){var e=Object(c.useContext)(te),t=Object(a.a)(e,2),n=t[0],i=t[1],r=Object(c.useRef)([]);return r.current=n.questions,function(e,t,c){if(void 0===r.current.find((function(e){return e.indexId===c})))throw new Error("this argument index is not exists:index"+c);i(Object(v.a)(Object(v.a)({},n),{},{questions:r.current.map((function(n){return n.indexId===c?Object(v.a)(Object(v.a)({},n),{},{content:e,comment:t}):n}))}))}}();return Object(c.useEffect)((function(){d(i,o,e.index)}),[i,o]),Object(b.jsxs)("div",{className:"CreateQuestionField",children:[Object(b.jsx)("input",{type:"textarea",placeholder:"\u554f\u984c\u6587\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044",onChange:function(e){return r(e.target.value)}}),Object(b.jsx)(X,{quesitonIndex:e.index}),Object(b.jsx)("input",{type:"text",placeholder:"\u56de\u7b54\u5f8c\u306b\u8868\u793a\u3055\u308c\u308b\u30b3\u30e1\u30f3\u30c8\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044",onChange:function(e){return j(e.target.value)}})]})},Z=function(e){var t=Object(c.useState)(1),n=Object(a.a)(t,2),i=n[0],r=n[1],s=Object(c.useState)([]),u=Object(a.a)(s,2),o=u[0],j=u[1],d=function(){var e=Object(c.useContext)(te),t=Object(a.a)(e,2),n=t[0],i=t[1],r=Object(c.useRef)([]);return r.current=n.questions,function(e){if(void 0===r.current.find((function(t){return t.indexId===e})))throw new Error("this argument index is not exists:index"+e);i(Object(v.a)(Object(v.a)({},n),{},{questions:r.current.filter((function(t){return t.indexId!==e}))}))}}(),l=function(){var e=Object(c.useContext)(te),t=Object(a.a)(e,2),n=t[0],i=t[1],r=Object(c.useRef)([]);return r.current=n.questions,function(e){if(void 0!==n.questions.find((function(t){return t.indexId===e.indexId})))throw new Error("this argument index already exists:index"+e.indexId);r.current.push(e),i(Object(v.a)(Object(v.a)({},n),{},{questions:r.current}))}}(),O=Object(c.useRef)([]);O.current=o,Object(c.useEffect)((function(){f(0)}),[]);var f=function(e){l({indexId:e,content:"",comment:"",choices:[]}),o.push(Object(b.jsxs)("div",{children:[Object(b.jsx)(Y,{index:e}),Object(b.jsx)("div",{className:"delete",onClick:function(){return t=e,j(O.current.filter((function(e){return e.key!=t}))),void d(t);var t},children:"\u524a\u9664"})]},e)),j(Object(U.a)(o))};return Object(b.jsxs)("div",{className:"createQuestionForm",children:[o,Object(b.jsx)("div",{onClick:function(){f(i),r(i+1)},children:"\u554f\u984c\u3092\u8ffd\u52a0"})]})},$=n(35),ee=n.n($),te=i.a.createContext({}),ne=function(){var e=Object(c.useState)(W),t=Object(a.a)(e,2),n=t[0],i=t[1],r=Object(c.useState)(""),s=Object(a.a)(r,2),u=s[0],o=s[1],d=Object(c.useState)(""),l=Object(a.a)(d,2),O=l[0],f=l[1],x=Object(c.useState)({category:n,description:O,title:u,questions:[]}),h=Object(a.a)(x,2),m=h[0],v=h[1];return Object(b.jsxs)("div",{className:"CreateQuizForm",children:[Object(b.jsxs)(te.Provider,{value:[m,v],children:[Object(b.jsx)(M,{setCategory:i}),Object(b.jsx)("div",{className:"title",children:Object(b.jsx)("input",{type:"text",className:"input",placeholder:"\u30af\u30a4\u30ba\u306e\u30bf\u30a4\u30c8\u30eb\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044",onChange:function(e){return o(e.target.value)}})}),Object(b.jsx)("div",{className:"description",children:Object(b.jsx)("input",{type:"text",className:"input",onChange:function(e){return f(e.target.value)}})}),Object(b.jsx)(Z,{})]}),Object(b.jsx)("button",{className:"submit",onClick:function(e){e.target.disabled=!0,j.a.post("/quizWeb/quiz/create",{createQuizParam:m}).then((function(e){return ee()().push("/")}))}})]})};var ce=function(){return Object(b.jsx)(k.a,{basename:"/quizWeb/react",children:Object(b.jsxs)(u.c,{children:[Object(b.jsxs)(u.a,{exact:!0,path:"/",children:[Object(b.jsx)(K,{}),Object(b.jsx)(k.b,{to:"/create",children:"\u554f\u984c\u4f5c\u6210"})]}),Object(b.jsx)(u.a,{exact:!0,path:"/game/:id",children:Object(b.jsx)(z,{})}),Object(b.jsx)(u.a,{exact:!0,path:"/create",children:Object(b.jsx)(ne,{})})]})})},ie=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,70)).then((function(t){var n=t.getCLS,c=t.getFID,i=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),c(e),i(e),r(e),s(e)}))};s.a.render(Object(b.jsx)(i.a.StrictMode,{children:Object(b.jsx)(ce,{})}),document.getElementById("root")),ie()}},[[69,1,2]]]);
//# sourceMappingURL=main.3afc95fc.chunk.js.map